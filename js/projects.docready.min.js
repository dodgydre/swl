!function(e){function i(){p=e(window).width(),h=e(window).height(),f=h-g-c,m=p/f,p<v&&(p=v),h<w&&(h=w),e("#site, .scrollwrap, .site").width(p).height(f),e("#proj_img").width(p).height(f),e("#proj_img").css("width",p+"px").css("height",f+"px"),e("#proj_img .slide").each(function(){var i=e(this),a=parseFloat(i.data("r")),r=i.data("f");if(200==r){r=1}else{r=parseFloat(r/100)}if(e(this).hasClass("full")){var i=e(this);if(containerW=p,containerH=f,containerAspect=p/f,imageAspect=a,containerAspect<imageAspect){var s=f*imageAspect;e(this).css("width",s).css("height",f).css("top","0").css("left",-(f*imageAspect-p)/2)}else{var o=p/imageAspect;e(this).css("width",p).css("height",o).css("top",-(p/imageAspect-f)/2).css("left","0")}}else t(i,p,f,"position",0,0,0,0)});var i=e(".slideshow .slide:visible");i.length>0&&i.hasClass("video")?e(".arrw.down").length>0?(e(".arrw.left, .arrw.right").height(f/2).width(p/2-p/2),e(".arrw.down").hide()):e(".arrw.left, .arrw.right").height(f/1.5).width(p/2-p/2):(e(".arrw.left, .arrw.right").height(f-f/4).width(p/2-p/10),e(".arrw.down").show())}function t(e,i,t,a,r,s,o,l){var n=(parseFloat(e.data("r")),e.data("f"));if(200==n){n=1;var d=!1}else{n=parseFloat(n/100);var d=!0}var p=parseFloat(e.data("r"));if(p||(p=e.width()/e.height()),n||(n=1),d){var h=(i-r)/(t-s);if(h>p)var g=(t-s)*n,c=g*p;else var c=(i-r)*n,g=c/p;var f=(t-s-g)/2,m=(i-r-c)/2}else{var h=i/t;if(p<1){var c=i,g=c/p;if(g<t)var g=t,c=g*p,m=(i-c)/2-o,f=(t-g)/2-l;else var f=(t-g)/2-l,m=(i-c)/2-o}else{var g=t,c=g*p;if(c<i)var c=i,g=c/p;var m=(i-c)/2-o,f=(t-g)/2-l}}if(e.hasClass("full"))var c=i,g=t,m=0,f=0;if("margin"==a)e.width(c).height(g).css({marginTop:f+"px",marginLeft:m+"px"});else if("position"==a)e.width(c).height(g).css({top:f+"px",left:m+"px"}),e.hasClass("video")&&e.find("iframe").height(g).width(c);else if("array"==a){var v=new Array(4);return v[0]=c,v[1]=g,v[2]=m,v[3]=f,v}}function a(){var i=(e(".single-footer__container").height(),e(".single-below-footer__container").outerHeight());i<33&&(i=0),e(".single-footer__container").stop().animate({height:i+c},{duration:200,easing:"jswing"}),e(".single-below-footer__container").stop().animate({marginTop:-i},{duration:200,easing:"jswing"})}function r(e,i){"/"!=e[0]&&(e="/"+e),"/"!=A[0]&&(A="/"+A);var t=e.split("/");A.split("/");e!=A&&("project"==t[2]&&s(e,t[3]),A=e)}function s(i,t){var a=(e("#proj_img"),e(".proj.active")),r=e(".proj.active .slide:visible");if(nextProj=e("#p_"+t),nextProj.index()>a.index())if(0==a.index()&&nextProj.index()==e(".proj").length-1)var s="u";else var s="d";else if(a.index()==e(".proj").length-1&&0==nextProj.index())var s="d";else var s="u";""==nextProj.html()?o(a,r,nextProj,s,!0):n(a,r,nextProj,s)}function o(e,t,a,r,s){var o=a.data("id");jQuery.ajax({url:ajaxgetprojectimgs.ajaxurl,type:"post",data:{action:"ajax_get_project_imgs",project_id:o},dataType:"json",success:function(o){jQuery.each(o,function(e,i){a.append(i)}),i(),s&&n(e,t,a,r)}})}function l(i){if(i.next(".proj").first().length>0)var t=i.nextAll(".proj").first();else var t=e(".proj:first-child");if(""==t.html()&&o(i,"",t,"",!1),i.prevAll(".proj").first().length>0)var a=i.prevAll(".proj").first();else var a=e(".proj").eq(e("proj").length-1);""==a.html()&&o(i,"",a,"",!1)}function n(i,a,r,s){var o=(a.offset().left,r.find(".slide:first-child")),n=t(o,p,f,"array",0,0,0,0),g=a.offset().top,c=r.parent().data("t");if("projects"==c);if(e(".single-footer__container").hasClass("expanded")&&e(".single-expand").click(),"u"==s){a.stop().animate({top:g+h+_},{duraction:u-100,easing:j}).hide().css("top",g+"px"),o.css("top",n[3]-h-_+"px").show(0).stop().animate({top:n[3]},{duration:u,easing:j});13*(e(".proj.active .slide").length-1)}else a.stop().animate({top:g-h},{duration:u-100,easing:j}).hide(0).css("top",g+"px"),o.css("top",p+n[3]+"px").show(0).stop().animate({top:n[3]},{duration:u,easing:j});i.removeClass("active"),r.addClass("active");var m=e("#proj_img .active img").first().nextAll(".caption").first().html(),v=e("#proj_img .active img").first().nextAll(".description").first().html(),w=e("#proj_img .active img").first().nextAll(".date").first().html();e(".single-footer__caption").html(m),e(".single-footer__caption-date").html(w),e(".single-below-footer__description").html(v),d(r),document.title=r.data("title")+"- Structure Workshop",l(r)}function d(i){var t=i.parent().data("t");if("projects"==t)var a="project";if(i.next(".proj").first().length>0)var r=i.nextAll(".proj").first();else var r=e(".proj:first-child");if(i.prevAll(".proj").first().length>0)var s=i.prevAll(".proj").first();else var s=e(".proj").eq(e("proj").length-1);var o=siteUrl+"/"+a+"/"+r.attr("id").replace("p_",""),l=siteUrl+"/"+a+"/"+s.attr("id").replace("p_","");e(".arrw.down").attr("href",o).attr("data-id",r.data("id")),e(".arrw.up").attr("href",l).attr("data-id",s.data("id"))}var p=e(window).width(),h=e(window).height(),g=105,c=45,f=h-g-c,m=p/f,v=0,w=0,_=0,j="jswing",u=400,x=300,C=700,A=window.location.pathname;e(document).ready(function(){e(".header__icon").click(function(i){if(e("body").hasClass("home"))return i.preventDefault(),e(".header__icon").toggleClass("is-active"),e(".large-menu").toggleClass("is-active"),e(".large-menu_mobile").toggleClass("is-active"),e(".large-menu-search").toggleClass("is-active"),!1}),e(".single-expand").click(function(i){i.preventDefault(),e(".single-footer__container").hasClass("expanded")?(e(".single-footer__container").stop().animate({height:c},{duration:20,easing:"jswing"}),e(".single-below-footer__container").stop().animate({marginTop:0},{duration:20,easing:"jswing"}),e(".single-footer__container").removeClass("expanded"),e(".single-footer__more").text(" / Read More")):(a(),e(".single-footer__container").addClass("expanded"),e(".single-footer__more").text(" / Hide Text"))}),e(window).width()>769?(e("#proj_img").addClass("large").removeClass("mobile"),e("#proj_img_container").addClass("large").removeClass("mobile"),e("proj_img img").addClass("slide")):(e("#proj_img").removeClass("large").addClass("mobile"),e("#proj_img_container").addClass("mobile").removeClass("large"),e("#proj_img img").removeClass("slide"),e(".arrw").hide()),e(window).resize(function(){if(e(window).width()>769){if(e(".mobile").length>0){e("#proj_img").addClass("large").removeClass("mobile"),e("#proj_img_container").addClass("large").removeClass("mobile"),e("#proj_img img").hide(),e("#proj_img .active img").first().fadeIn(400);var t=e("#proj_img .active img").first().nextAll(".caption").first().html(),a=e("#proj_img .active img").first().nextAll(".description").first().html(),r=e("#proj_img .active img").first().nextAll(".date").first().html();e(".single-footer__caption").html(t),e(".single-footer__caption-date").html(r),e(".single-below-footer__description").html(a)}}else e("#proj_img").removeClass("large").addClass("mobile"),e("#proj_img_container").removeClass("large").addClass("mobile");i()}),i();var s=window.History;if(s.enabled){s.Adapter.bind(window,"statechange",function(){var e=s.getState(),i=document.createElement("a");i.href=e.url,r(i.pathname,!1)});var o=window.location.hash;o&&s.Adapter.trigger(window,"statechange")}if(!e.browser.msie&&e("#proj_img").length>0){e("#proj_img img").hide(),e("#proj_img .active img").first().fadeIn(400);var l=e("#proj_img .active img").first().nextAll(".caption").html(),n=e("#proj_img .active img").first().nextAll(".description").html(),d=e("#proj_img .active img").first().nextAll(".date").html();e(".single-footer__caption").html(l),e(".single-footer__caption-date").html(d),e(".single-below-footer__description").html(n)}e("#proj_img.project .arrw").click(function(){var a=e(this);if(e(this).hasClass("left"))var r="l";else if(e(this).hasClass("right"))var r="r";else if(e(this).hasClass("up"))var r="u";else if(e(this).hasClass("down"))var r="d";i();var o=e("#proj_img"),l=e(".proj.active"),n=e(".proj.active .slide:visible");if("l"==r){if(l.find(".slide").length>1){if(n.prevAll(".proj.active .slide").first().length>0)var d=n.prevAll(".proj.active .slide").first();else var d=e(".proj.active .slide").eq(e(".proj.active .slide").length-1);if(e(".single-footer__container").hasClass("expanded")&&e(".single-expand").click(),o.hasClass("fading"))n.fadeOut(x),d.fadeIn(C);else if(o.hasClass("sliding")){var h=t(d,p,f,"array",0,0,0,0),g=n.offset().left,c=g+p+_,m=h[2]-p-_;n.stop().animate({left:c},{duration:u,easing:j}).hide(0).css("left",g+"px"),d.css("left",m+"px").show(0).stop().animate({left:h[2]},{duration:u,easing:j})}var v=d.next("span").html();e("footer .imgcap").html(v),d.hasClass("video")?(e(".arrw.left, .arrw.right").height(f/2),e(".arrw.down").hide()):(e("arrw.left, .arrw.right").height(f-120),e("arrw.down").show())}}else if("r"==r){if(l.find(".slide").length>1){if(n.nextAll(".proj.active .slide").first().length>0)var d=n.nextAll(".proj.active .slide").first();else var d=e(".proj.active .slide:first-child");if(e(".single-footer__container").hasClass("expanded")&&e(".single-expand").click(),o.hasClass("fading"))n.fadeOut(x),d.fadeIn(C);else if(o.hasClass("sliding")){var h=t(d,p,f,"array",0,0,0,0),g=n.offset().left,c=-(p+_),m=h[2]+p+_;n.stop().animate({left:c},{duration:u,easing:j}).hide(0).css("left",g+"px"),d.css("left",m+"px").show(0).stop().animate({left:h[2]},{duration:u,easing:j})}var v=d.next("span").html();e("#footer .imgcap").html(v),d.hasClass("video")?(e(".arrw.left, .arrw.right").height(f/2),e(".arrw.down").hide()):(e(".arrw.left, .arrw.right").height(f-120),e(".arrw.down").show())}}else if("u"==r||"d"==r){var w=a.attr("href");s.pushState(null,null,w)}return!1}),e(document).keydown(function(i){37!=i.which||i.metaKey?38!=i.which||i.metaKey?39!=i.which||i.metaKey?40!=i.which||i.metaKey||(i.preventDefault(),e(".arrw.down").click()):(i.preventDefault(),e(".arrw.right").click()):(i.preventDefault(),e(".arrw.up").click()):(i.preventDefault(),e(".arrw.left").click())}),e(".arrw").swipe({swipe:function(i,t,a,r,s,o){"left"==t&&e(".arrw.right").click(),"right"==t&&e(".arrw.left").click(),"down"==t&&e(".arrw.up").click(),"up"==t&&e(".arrw.down").click()}})}),e(window).load(function(){d(e(".proj.active")),l(e(".proj.active"))})}(jQuery);