!function(e){function t(){a=e(window).width(),o=e(window).height(),n=o-r-l,h=a/n,a<c&&(a=c),o<d&&(o=d),e("#site, .site").width(a).height(n),e("#proj_img").width(a).height(n),e("#proj_img").css("width",a+"px").css("height",n+"px"),1==e(".mobile").length?(e(".arrw").hide(),e("#proj_img img").each(function(){e(this).removeClass("slide").addClass("project_image"),e(this).css("width","100%").css("display","block").css("height","")})):(e(".arrw").show(),e("#proj_img img").each(function(){e(this).addClass("slide").removeClass("project_image")})),e("#proj_img .slide").each(function(){var t=e(this),s=parseFloat(t.data("r")),o=t.data("f");if(200==o){o=1}else{o=parseFloat(o/100)}if(e(this).hasClass("full")){var t=e(this);if(containerW=a,containerH=n,containerAspect=a/n,imageAspect=s,containerAspect<imageAspect){var r=n*imageAspect;e(this).css("width",r).css("height",n).css("top","0").css("left",-(n*imageAspect-a)/2)}else{var l=a/imageAspect;e(this).css("width",a).css("height",l).css("top",-(a/imageAspect-n)/2).css("left","0")}}else w?i(t,a,n,"position",0,0,0,0):imgResizeLeft(t,a,n,"position",45,0,45,0)}),e(".arrw.left, .arrw.right").not(".small").height(n).width(a/2-a/10).css("top","0"),e(".projthumb").each(function(){e("body").hasClass("mobile")?(thisImg=e(this).find("img"),thisText=e(this).find(".projtext"),iR=thisImg.data("r"),1==iR?(thisImg.height(140).width(140).css("left","0px").css("top","0px"),thisText.css("top","145px").css("left","0px")):iR<1?(width=140*iR,imgleft=(140-width)/2,thisImg.height(140).width("auto").css("left",imgleft+"px").css("top","0px"),thisText.css("top","145px").css("left",imgleft+"px")):(height=140/iR,imgtop=(140-height)/2,thisImg.height("auto").width(140).css("left","0px").css("top",imgtop+"px"),thisText.css("top",height+imgtop+5+"px"))):(thisImg=e(this).find("img"),thisText=e(this).find(".projtext"),iR=thisImg.data("r"),1==iR?(thisImg.height(270).width(270).css("left","0px").css("top","0px"),thisText.css("top","275px").css("left","0px")):iR<1?(width=270*iR,imgleft=(270-width)/2,thisImg.height(270).width("auto").css("left",imgleft+"px").css("top","0px"),thisText.css("top","275px").css("left",imgleft+"px")):(height=270/iR,imgtop=(270-height)/2,thisImg.height("auto").width(270).css("left","0px").css("top",imgtop+"px"),thisText.css("top",height+imgtop+5+"px")))})}function i(e,t,i,s,a,o,r,l){var n=(parseFloat(e.data("r")),e.data("f"));if(200==n){n=1;var h=!1}else{n=parseFloat(n/100);var h=!0}var c=parseFloat(e.data("r"));if(c||(c=e.width()/e.height()),n||(n=1),h){var d=(t-a)/(i-o);if(d>c)var f=(i-o)*n,p=f*c;else var p=(t-a)*n,f=p/c;var g=(i-o-f)/2,m=(t-a-p)/2}else{var d=t/i;if(c<1){var p=t,f=p/c;if(f<i)var f=i,p=f*c,m=(t-p)/2-r,g=(i-f)/2-l;else var g=(i-f)/2-l,m=(t-p)/2-r}else{var f=i,p=f*c;if(p<t)var p=t,f=p/c;var m=(t-p)/2-r,g=(i-f)/2-l}}if(e.hasClass("full"))var p=t,f=i,m=0,g=0;if("margin"==s)e.width(p).height(f).css({marginTop:g+"px",marginLeft:m+"px"});else if("position"==s)e.width(p).height(f).css({top:g+"px",left:m+"px"});else if("array"==s){var v=new Array(4);return v[0]=p,v[1]=f,v[2]=m,v[3]=g,v}}function s(){var t=(e(".footer__container").height(),e(".below-footer__container").outerHeight());t<33&&(t=0),e(".footer__container").stop().animate({height:t+l},{duration:200,easing:"jswing"}),e(".below-footer__container").stop().animate({marginTop:-t},{duration:200,easing:"jswing"})}var a=e(window).width(),o=e(window).height(),r=105,l=45,n=o-r-l,h=a/n,c=0,d=0,f=0,p="jswing",g=400,m=300,v=700,w=(window.location.pathname,!0);e(document).ready(function(){if(e(window).width()>769?(e("#proj_img").addClass("large").removeClass("mobile"),e("#projthumb-wrap").addClass("large").removeClass("mobile"),e("#proj_img img").addClass("slide"),e("body").addClass("large").removeClass("mobile")):(e("#proj_img").removeClass("large").addClass("mobile"),e("#projthumb-wrap").removeClass("large").addClass("mobile"),e("#proj_img img").removeClass("slide"),e(".arrw").hide(),e("body").addClass("mobile").removeClass("large")),e(window).resize(function(){if(e(window).width()>769){if(e(".mobile").length>0){e("#proj_img").addClass("large").removeClass("mobile"),e("#projthumb-wrap").addClass("large").removeClass("mobile"),e("body").addClass("large").removeClass("mobile"),e("#proj_img img").hide(),e("#proj_img .active img").first().fadeIn(400);var i=e("#proj_img .active img").first().nextAll(".caption").first().html(),s=e("#proj_img .active img").first().nextAll(".description").first().html(),a=e("#proj_img .active img").first().nextAll(".date").first().html();e(".footer__caption").html(i),e(".footer__caption-date").html(a),e(".below-footer__description").html(s),e(".large").find(".projthumb").hover(function(){e(this).find(".projtext").fadeIn(100)},function(){e(this).find(".projtext").fadeOut(100)})}}else e("#proj_img").removeClass("large").addClass("mobile"),e("#projthumb-wrap").removeClass("large").addClass("mobile"),e("body").removeClass("large").addClass("mobile"),e(".projthumb").off("hover");t()}),e(".header__icon").click(function(t){return e("body").hasClass("home")?(t.preventDefault(),e(".header__icon").toggleClass("is-active"),e(".large-menu").toggleClass("is-active"),e(".large-menu-filter").toggleClass("is-active"),e(".large-menu_mobile").toggleClass("is-active"),e(".large-menu-search").toggleClass("is-active"),!1):void(e("body").hasClass("mobile")&&(t.preventDefault(),e(".header__icon").toggleClass("is-active"),e(".large-menu").toggleClass("is-active"),e(".large-menu-filter").toggleClass("is-active"),e(".large-menu_mobile").toggleClass("is-active"),e(".large-menu-search").toggleClass("is-active")))}),e("body").hasClass("large")&&(jQuery(".search").show(),jQuery(".search-icon").show(),jQuery("#searchIcon").click(function(){"0px"==jQuery("#searchElements").css("left")?jQuery("#searchElements").stop().animate({left:-302},{duration:800,easing:"jswing"}):jQuery("#searchElements").stop().animate({left:0},{duration:800,easing:"jswing"})}),jQuery(".large-menu-search").addClass("is-active")),e(".expand").click(function(t){t.preventDefault(),e(".footer__container").hasClass("expanded")?(e(".footer__container").stop().animate({height:l},{duration:20,easing:"jswing"}),e(".below-footer__container").stop().animate({marginTop:0},{duration:20,easing:"jswing"}),e(".footer__container").removeClass("expanded"),e(".footer__more").text(" / Read More")):(s(),e(".footer__container").addClass("expanded"),e(".footer__more").text(" / Hide text"))}),t(),!e.browser.msie&&e(window).width()>769&&e("#proj_img").length>0){e("#proj_img img").hide(),e("#proj_img .active img").first().fadeIn(400);var r=e("#proj_img .active img").first().nextAll(".caption").first().html(),h=e("#proj_img .active img").first().nextAll(".description").first().html(),c=e("#proj_img .active img").first().nextAll(".date").first().html();e(".footer__caption").html(r),e(".footer__caption-date").html(c),e(".below-footer__description").html(h)}e("#proj_img.home .arrw").click(function(){a=e(window).width(),o=e(window).height();e(this);if(e(this).hasClass("left"))var s="l";else if(e(this).hasClass("right"))var s="r";t();var r=e("#proj_img"),l=e(".proj.active"),h=e(".proj.active .slide:visible");if("l"==s){if(l.find(".slide").length>1){if(h.prevAll(".proj.active .slide").first().length>0)var c=h.prevAll(".proj.active .slide").first();else var c=e(".proj.active .slide").eq(e(".proj.active .slide").length-1);if(e(".footer__container").hasClass("expanded")&&e(".expand").click(),r.hasClass("fading"))h.fadeOut(m),c.fadeIn(v);else if(r.hasClass("sliding")){if(w)var d=i(c,a,n,"array",0,0,0,0);else var d=imgResizeLeft(c,a,n,"array",45,0,45,0);var _=h.offset().left,u=_+a+f,x=d[2]-a-f,j=c.nextAll(".caption").first().html(),C=c.nextAll(".date").first().html(),b=c.nextAll(".description").first().html();h.stop().animate({left:u},{duration:g,easing:p}).hide(0).css("left",_+"px"),c.css("left",x+"px").show(0).stop().animate({left:d[2]},g,p,function(){e(".footer__caption").html(j),e(".footer__caption-date").html(C),e(".below-footer__description").html(b)})}}}else if("r"==s&&l.find(".slide").length>1){if(h.nextAll(".proj.active .slide").first().length>0)var c=h.nextAll(".proj.active .slide").first();else var c=e(".proj.active .slide").first();if(e(".footer__container").hasClass("expanded")&&e(".expand").click(),r.hasClass("fading"))h.fadeOut(m),c.fadeIn(v);else if(r.hasClass("sliding")){if(w)var d=i(c,a,n,"array",0,0,0,0);else var d=imgResizeLeft(c,a,n,"array",45,0,45,0);var _=h.offset().left,u=-(a+f),x=d[2]+a+f,j=c.nextAll(".caption").first().html(),C=c.nextAll(".date").first().html(),b=c.nextAll(".description").first().html();e(".caption__overlay").fadeOut(),h.stop().animate({left:u},{duration:g,easing:p}).hide(0).css("left",_+"px"),c.css("left",x+"px").show(0).stop().animate({left:d[2]},g,p,function(){e(".footer__caption").html(j),e(".footer__caption-date").html(C),e(".below-footer__description").html(b)})}e(".arrw.left, .arrw.right").not(".small").height(n)}return!1}),e(document).keydown(function(t){37!=t.which||t.metaKey?39!=t.which||t.metaKey||(t.preventDefault(),e(".arrw.right").click()):(t.preventDefault(),e(".arrw.left").click())}),e(".arrw").swipe({swipe:function(t,i,s,a,o,r){"left"==i&&e(".arrw.right").click(),"right"==i&&e(".arrw.left").click()}}),jQuery(".large").find(".projthumb").hover(function(){jQuery(this).find(".projtext").fadeIn(100)},function(){jQuery(this).find(".projtext").fadeOut(100)}),e(".more").click(function(){"/ Read More"==e(this).html()?(e(this).html("/ Hide Text"),e(this).nextAll(".description").first().addClass("active")):(e(this).html("/ Read More"),e(this).nextAll(".description").first().removeClass("active"))}),e(window).scroll(function(){e(".description.active").each(function(){e(window).scrollTop()>e(this).nextAll("img").first().position().top?(e(this).prevAll(".more").first().click(),e(window).scrollTop(e(this).nextAll("img").first().position().top)):e(window).scrollTop()+e(window).height()<e(this).position().top&&e(this).prevAll(".more").first().click()})})})}(jQuery);